window.onscroll=function(){stickyNav()};const $href=$('.navbar a[href^="#"]'),$dropdownBtn=$('input[id$="DropdownBtn"]'),hamburger=document.querySelector(".hamburger"),navbar=document.querySelector(".navbar"),sticky=navbar.offsetTop+100;function stickyNav(){window.scrollY>=sticky?navbar.classList.add("sticky"):navbar.classList.remove("sticky")}function onScroll(){let e=$(document).scrollTop();$(".navbar a").each(function(){let t=$(this);$(t.attr("href")).position().top<=e+80&&($(".navbar a").removeClass("active"),t.addClass("active"))})}function checkForCloseMatch(e,t){if(t.length<3)return"";if(e.includes(t))return"";for(let o=1;o<t.length;o++){const n=t.substring(0,o),r=t.substring(o),a=new RegExp(`${n}.${r.substring(1)}`);if(a.test(e))return e.replace(a,t);const c=new RegExp(`${n}.${r}`);if(c.test(e))return e.replace(c,t);if("mail"!==r){const o=new RegExp(`${n}{0}${r}`);if(o.test(e))return e.replace(o,t)}const s=[t.substring(0,o-1),t.charAt(o),t.charAt(o-1),t.substring(o+1)].join("");if(e.includes(s))return e.replace(s,t)}return""}function checkForDomainTypo(e){const t=["googlemail","hotmail","outlook","yahoo","icloud","mail"],[o,n]=e.split("@");for(let e=0;e<t.length;e++){const r=checkForCloseMatch(n,t[e]);if(r)return`${o}@${r}`}return""}function checkForNameTypo(e,t){const[o,n]=e.split("@"),r=checkForCloseMatch(o,t);return r?`${r}@${n}`:""}function checkForCommonTypos(e){let t=[{pattern:/,(com|de|org|net)$/,fix:e=>e.replace(/,(com|de|org|net)$/,".$1")},{pattern:/,co\.\w{2}$/,fix:e=>e.replace(/,(co\.\w{2}$)/,".$1")},{pattern:/@\w*$/,fix:e=>e+".com"}].find(t=>t.pattern.test(e));return t?t.fix(e):""}function checkForTypo(e){const t=e.email;return checkForCommonTypos(t)||checkForDomainTypo(t)||checkForNameTypo(t,""===e.name||e.name.split(/[, ]+/g)[0].trim().toLowerCase())||checkForNameTypo(t,""===e.name||e.name.split(/[, ]+/g)[1].trim().toLowerCase())}$(document).ready(function(){$(document).on("scroll",onScroll),$href.on("click",function(e){e.preventDefault(),$(document).off("scroll"),$(".navbar a").each(function(){$(this).removeClass("active")}),$(this).addClass("active");let t=navbar.clientHeight,o=$(this.hash);null===document.querySelector(".navbar.sticky")?$("html, body").stop().animate({scrollTop:o.offset().top-t},700,function(){$(document).on("scroll",onScroll)}):$("html, body").stop().animate({scrollTop:o.offset().top+2},700,function(){$(document).on("scroll",onScroll)}),hamburger.classList.remove("is-active")})}),$(document).ready(function(){$dropdownBtn.on("click",function(){/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)&&$dropdownBtn.is(":checked")&&$("html, body").animate({scrollTop:$("div[class$='DropdownContent']").offset().top-navbar.clientHeight},700)})}),hamburger.addEventListener("click",function(){hamburger.classList.toggle("is-active")}),document.querySelector(".currentYear").append((new Date).getFullYear());const getEl=e=>document.querySelector(e),nameEl=getEl('[name="name"]'),emailEl=getEl('[name="email"]'),messageEl=getEl(".valMessage");let suggestedEmail="";function gatherDataAndCheck(){(suggestedEmail=checkForTypo({name:nameEl.value,email:emailEl.value}))?(messageEl.textContent=`Meinten Sie ${suggestedEmail}?`,messageEl.tabindex=1,messageEl.focus()):messageEl.textContent=""}emailEl.addEventListener("blur",gatherDataAndCheck),messageEl.addEventListener("click",()=>{suggestedEmail&&(emailEl.value=suggestedEmail),emailEl.focus(),gatherDataAndCheck()});const form=document.querySelector("form"),url="https://ynm902zoa2.execute-api.eu-west-1.amazonaws.com/dev/static-site-mailer",contactSubmit=document.querySelector(".contactSubmit");function success(){contactSubmit.insertAdjacentHTML("beforebegin",'<p class="formResponse" style="color:#2E7D32;background-color:#E6F4EA;border:1px solid #2E7D32;">Danke f√ºr Ihre Nachricht</p>'),contactSubmit.blur(),setTimeout(function(){document.querySelector(".formResponse").remove(),contactSubmit.disabled=!1},5e3),form.reset()}function error(e){contactSubmit.insertAdjacentHTML("beforebegin",'<p class="formResponse" style="color:#E21A11;background-color:#ffefef;border:1px solid #E21A11;">Es ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.</p>'),setTimeout(function(){document.querySelector(".formResponse").remove(),contactSubmit.disabled=!1},5e3),console.error(e)}form.onsubmit=(e=>{e.preventDefault();let t=new XMLHttpRequest;t.open("POST",url,!0),t.setRequestHeader("Accept","application/json; charset=utf-8"),t.setRequestHeader("Content-Type","application/json; charset=utf-8");const o={name:form.name.value,email:form.email.value,message:form.message.value};contactSubmit.disabled=!0,document.getElementById("honeypot").value||t.status>=400?error():form.name.value&&form.email.value&&form.message.value&&(success(),t.send(JSON.stringify(o)))});
