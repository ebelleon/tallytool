window.onscroll=function(){stickyNav()};const $href=$(".navbar a[href^=\"#\"]"),$dropdownBtn=$("input[id$=\"DropdownBtn\"]"),hamburger=document.querySelector(".hamburger"),navbar=document.querySelector(".navbar"),sticky=navbar.offsetTop+100;function stickyNav(){window.scrollY>=sticky?navbar.classList.add("sticky"):navbar.classList.remove("sticky")}$(document).ready(function(){$(document).on("scroll",onScroll),$href.on("click",function(a){a.preventDefault(),$(document).off("scroll"),$(".navbar a").each(function(){$(this).removeClass("active")}),$(this).addClass("active");let b=navbar.clientHeight,c=$(this.hash);null===document.querySelector(".navbar.sticky")?$("html, body").stop().animate({scrollTop:c.offset().top-b},700,function(){$(document).on("scroll",onScroll)}):$("html, body").stop().animate({scrollTop:c.offset().top+2},700,function(){$(document).on("scroll",onScroll)}),hamburger.classList.remove("is-active")})});function onScroll(){let a=$(document).scrollTop();$(".navbar a").each(function(){let b=$(this),c=$(b.attr("href"));c.position().top<=a+80&&($(".navbar a").removeClass("active"),b.addClass("active"))})}$(document).ready(function(){$dropdownBtn.on("click",function(){/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)&&$dropdownBtn.is(":checked")&&$("html, body").animate({scrollTop:$("div[class$='DropdownContent']").offset().top-navbar.clientHeight},700)})}),hamburger.addEventListener("click",function(){hamburger.classList.toggle("is-active")}),document.querySelector(".currentYear").append(new Date().getFullYear());function checkForCloseMatch(a,b){if(3>b.length)return"";if(a.includes(b))return"";for(let c=1;c<b.length;c++){const d=b.substring(0,c),e=b.substring(c),f=new RegExp(`${d}.${e.substring(1)}`);if(f.test(a))return a.replace(f,b);const g=new RegExp(`${d}.${e}`);if(g.test(a))return a.replace(g,b);if("mail"!==e){const c=new RegExp(`${d}{0}${e}`);if(c.test(a))return a.replace(c,b)}const h=[b.substring(0,c-1),b.charAt(c),b.charAt(c-1),b.substring(c+1)].join("");if(a.includes(h))return a.replace(h,b)}return""}function checkForDomainTypo(a){const b=["googlemail","hotmail","outlook","yahoo","icloud","mail"],[c,d]=a.split("@");for(let e=0;e<b.length;e++){const a=b[e],f=checkForCloseMatch(d,a);if(f)return`${c}@${f}`}return""}function checkForNameTypo(a,b){const[c,d]=a.split("@"),e=checkForCloseMatch(c,b);return e?`${e}@${d}`:""}function checkForCommonTypos(a){const b=[{pattern:/,(com|de|org|net)$/,fix:a=>a.replace(/,(com|de|org|net)$/,".$1")},{pattern:/,co\.\w{2}$/,fix:a=>a.replace(/,(co\.\w{2}$)/,".$1")},{pattern:/@\w*$/,fix:a=>a+".com"}];let c=b.find(b=>b.pattern.test(a));return c?c.fix(a):""}function checkForTypo(a){const b=a.email;return checkForCommonTypos(b)||checkForDomainTypo(b)||checkForNameTypo(b,""===a.name||a.name.split(/[, ]+/g)[0].trim().toLowerCase())||checkForNameTypo(b,""===a.name||a.name.split(/[, ]+/g)[1].trim().toLowerCase())}const getEl=a=>document.querySelector(a),nameEl=getEl("[name=\"name\"]"),emailEl=getEl("[name=\"email\"]"),messageEl=getEl(".valMessage");let suggestedEmail="";function gatherDataAndCheck(){suggestedEmail=checkForTypo({name:nameEl.value,email:emailEl.value}),suggestedEmail?(messageEl.textContent=`Meinten Sie ${suggestedEmail}?`,messageEl.tabindex=1,messageEl.focus()):messageEl.textContent=""}emailEl.addEventListener("blur",gatherDataAndCheck),messageEl.addEventListener("click",()=>{suggestedEmail&&(emailEl.value=suggestedEmail),emailEl.focus(),gatherDataAndCheck()});const form=document.querySelector("form"),url="https://ynm902zoa2.execute-api.eu-west-1.amazonaws.com/dev/static-site-mailer",contactSubmit=document.querySelector(".contactSubmit");function success(){contactSubmit.insertAdjacentHTML("beforebegin","<p class=\"formResponse\" style=\"color:#2E7D32;background-color:#E6F4EA;border:1px solid #2E7D32;font-size:0.8em\">Danke f\xFCr Ihre Nachricht</p>"),contactSubmit.blur(),setTimeout(function(){document.querySelector(".formResponse").remove(),contactSubmit.disabled=!1},5e3),form.reset()}function error(a){contactSubmit.insertAdjacentHTML("beforebegin","<p class=\"formResponse\" style=\"color:#E21A11;background-color:#ffefef;border:1px solid #E21A11;font-size:0.8em;\">Es ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.</p>"),setTimeout(function(){document.querySelector(".formResponse").remove(),contactSubmit.disabled=!1},5e3),console.error(a)}form.onsubmit=a=>{a.preventDefault();let b=new XMLHttpRequest;b.open("POST",url,!0),b.setRequestHeader("Accept","application/json; charset=utf-8"),b.setRequestHeader("Content-Type","application/json; charset=utf-8");const c={name:form.name.value,email:form.email.value,message:form.message.value};contactSubmit.disabled=!0,document.getElementById("honeypot").value||400<=b.status?error():form.name.value&&form.email.value&&form.message.value&&(success(),b.send(JSON.stringify(c)))};
